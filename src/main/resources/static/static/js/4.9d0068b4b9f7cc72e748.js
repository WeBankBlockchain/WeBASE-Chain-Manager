webpackJsonp([4],{OWtT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("1HuH"),n=a("P9l9"),o=a("U+Q4"),s={name:"addChain",props:["show"],data:function(){return{dialogVisible:this.show,chainFrom:{chainName:"",chainId:"",type:0,description:""},loading:!1,rules:{chainName:[{required:!0,message:"请输入区块链名称",trigger:"blur"}],chainId:[{required:!0,message:"请输入区块链编号",trigger:"blur"},{pattern:/^\d{0,11}$/,message:"区块链编号仅允许数字,长度不超过11位",trigger:"blur"}],type:[{required:!0,message:"请选择区块链类型",trigger:"blur"}]},options:[{label:"非国密",value:0},{label:"国密",value:1}]}},mounted:function(){this.chainFrom.type=this.options[0].value},methods:{submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.loading=!0,t.newChain()})},newChain:function(){var e=this,t={chainName:this.chainFrom.chainName,chainType:this.chainFrom.type,description:this.chainFrom.description,chainId:this.chainFrom.chainId};Object(n.a)(t).then(function(t){e.loading=!1,0===t.data.code?e.modelClose():e.$message({type:"error",message:o.a.errCode[t.data.code].zh})}).catch(function(t){e.loading=!1,e.$message({type:"error",message:"系统错误"})})},modelClose:function(){this.$emit("close")}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"dialog-wrapper",attrs:{title:"新增区块链",visible:e.dialogVisible,"before-close":e.modelClose,width:"400px",center:!0,"show-close":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"chainFrom",staticClass:"demo-ruleForm",attrs:{model:e.chainFrom,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"区块链编号",prop:"chainId"}},[a("el-input",{model:{value:e.chainFrom.chainId,callback:function(t){e.$set(e.chainFrom,"chainId",t)},expression:"chainFrom.chainId"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"区块链名称",prop:"chainName"}},[a("el-input",{model:{value:e.chainFrom.chainName,callback:function(t){e.$set(e.chainFrom,"chainName",t)},expression:"chainFrom.chainName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"区块链类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.chainFrom.type,callback:function(t){e.$set(e.chainFrom,"type",t)},expression:"chainFrom.type"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"区块链备注"}},[a("el-input",{model:{value:e.chainFrom.description,callback:function(t){e.$set(e.chainFrom,"description",t)},expression:"chainFrom.description"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.modelClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submit("chainFrom")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(s,r,!1,function(e){a("oZYb")},null,null).exports,c=a("14gb"),d={name:"chain",components:{"v-content-head":i.a,"add-chain":l},data:function(){return{chainData:[],addChainShow:!1,loading:!1}},mounted:function(){this.getChainList()},methods:{createGroup:function(){this.addChainShow=!0},getChainList:function(){var e=this;Object(n.g)().then(function(t){0==t.data.code?e.chainData=t.data.data:e.$message({type:"error",message:o.a.errCode[t.data.code].zh})}).catch(function(t){e.$message({type:"error",message:"系统错误"})})},addChainClose:function(){c.a.$emit("delete"),this.addChainShow=!1,this.getChainList()},handleClick:function(e){var t=this;this.$confirm("此操作将删除该链, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteData(e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteData:function(e){var t=this;Object(n.f)(e.chainId).then(function(e){0===e.data.code?(t.$message({type:"success",message:"删除成功"}),c.a.$emit("delete"),t.getChainList()):t.$message({type:"error",message:o.a.errCode[e.data.code].zh})}).catch(function(e){t.$message({type:"error",message:"系统错误"})})}},filters:{Type:function(e){return e?"sm2/sm3":"secp256k1/sha3"}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-content-head",{attrs:{headTitle:"区块链管理"}}),e._v(" "),a("div",{staticClass:"module-wrapper"},[a("div",{staticClass:"search-part",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"search-part-left"},[a("el-button",{staticClass:"search-part-left-btn",attrs:{type:"primary"},on:{click:e.createGroup}},[e._v("新增区块链")])],1)]),e._v(" "),a("div",{staticClass:"search-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"search-table-content",attrs:{data:e.chainData}},[a("el-table-column",{attrs:{prop:"chainName",label:"区块链名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chainId",label:"区块链编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chainType",label:"区块链类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("Type")(t.row.chainType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("删除")])]}}])})],1)],1)]),e._v(" "),e.addChainShow?a("add-chain",{attrs:{show:e.addChainShow},on:{close:e.addChainClose}}):e._e()],1)},staticRenderFns:[]};var u=a("VU/8")(d,h,!1,function(e){a("yH2I")},null,null);t.default=u.exports},oZYb:function(e,t){},yH2I:function(e,t){}});